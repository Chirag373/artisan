{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtisansHub - Artist Discovery</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom utility to hide scrollbar for clean look */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        :root {
            --banner-g1: 37 99 235;
            /* blue-600 */
            --banner-g2: 147 51 234;
            /* purple-600 */
            --banner-bg: 254 252 232;
            /* yellow-50 / #FEFCE8 */
        }

        .hero-banner {
            position: relative;
            width: 100%;
            min-height: auto;
            overflow: hidden;
            background: rgb(var(--banner-bg));
            padding: 2rem 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .tri-wrap {
            position: absolute;
            inset: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .tri {
            position: absolute;
            transform-origin: center;
            opacity: 0.75;
            mix-blend-mode: multiply;
            clip-path: polygon(50% 0, 0 100%, 100% 100%);
            background: linear-gradient(135deg, rgb(var(--banner-g1)) 0%, rgb(var(--banner-g2)) 100%);
            background-size: 200% 200%;
            filter: drop-shadow(0 12px 32px rgba(37, 99, 235, 0.25));
            will-change: transform, background-position, opacity;
            animation: float 10s ease-in-out infinite, shiftGradient 7s linear infinite;
        }

        .tri.t1 {
            left: -8%;
            top: -10%;
            width: 50vmin;
            height: 50vmin;
            opacity: 0.5;
            animation-duration: 11s, 8s;
        }

        .tri.t2 {
            right: -10%;
            top: 15%;
            width: 40vmin;
            height: 40vmin;
            opacity: 0.7;
            animation-duration: 9s, 6.5s;
        }

        .tri.t3 {
            left: 20%;
            bottom: -8%;
            width: 55vmin;
            height: 55vmin;
            opacity: 0.4;
            animation-duration: 13s, 9s;
        }

        .tri.t4 {
            display: none;
        }

        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
            }

            25% {
                transform: translateY(-2vh) rotate(3deg) scale(1.02);
            }

            50% {
                transform: translateY(-4vh) rotate(-4deg) scale(1.01);
            }

            75% {
                transform: translateY(-2vh) rotate(2deg) scale(1.01);
            }

            100% {
                transform: translateY(0) rotate(0deg) scale(1);
            }
        }

        @keyframes shiftGradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .sparkle {
            position: absolute;
            pointer-events: none;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.8) 0%, rgba(59, 130, 246, 0) 60%);
            width: 5px;
            height: 5px;
            border-radius: 999px;
            filter: blur(0.5px);
            opacity: 0.8;
            animation: pop 2.8s infinite ease-in-out;
        }

        .sparkle.s1 {
            left: 45%;
            top: 25%;
            animation-delay: 0.3s;
        }

        .sparkle.s2 {
            left: 55%;
            top: 30%;
            animation-delay: 1.2s;
        }

        .sparkle.s3 {
            left: 50%;
            top: 35%;
            animation-delay: 1.8s;
        }

        @keyframes pop {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            40% {
                transform: scale(1.5);
                opacity: 1;
            }

            100% {
                transform: scale(0.7);
                opacity: 0;
            }
        }

        .banner-content {
            position: relative;
            z-index: 10;
        }

        @media (prefers-reduced-motion: reduce) {
            .tri {
                animation: none;
            }

            .sparkle {
                animation: none;
            }
        }

        @media (max-width: 640px) {
            .tri.t3 {
                display: none;
            }

            .hero-banner {
                min-height: auto !important;
                height: auto !important;
                align-items: flex-start !important;
                padding-top: 2rem !important;
                padding-bottom: 0.5rem !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
                overflow: hidden !important;
            }

            .tri-wrap {
                height: 100% !important;
                top: 0 !important;
                bottom: 0 !important;
                overflow: hidden !important;
            }

            .tri.t1 {
                width: 35vmin !important;
                height: 35vmin !important;
                top: -5% !important;
                left: -5% !important;
            }

            .tri.t2 {
                width: 30vmin !important;
                height: 30vmin !important;
                top: 10% !important;
                right: -5% !important;
            }

            .tri.t4 {
                display: block !important;
                left: 50% !important;
                margin-left: -20vmin !important;
                bottom: 5% !important;
                top: auto !important;
                width: 40vmin !important;
                height: 40vmin !important;
                opacity: 0.5 !important;
                animation: float 12s ease-in-out infinite, shiftGradient 8s linear infinite !important;
            }

            .banner-content {
                padding-bottom: 0 !important;
                margin-bottom: 0 !important;
            }

            .banner-content h1 {
                margin-bottom: 1.5rem !important;
            }

            .banner-content p {
                margin-bottom: 1.5rem !important;
            }

            .banner-content>div:last-child {
                margin-bottom: 0 !important;
            }

            .banner-content .flex.flex-col {
                margin-bottom: 0 !important;
            }

            .banner-content .flex.flex-col a:last-child {
                margin-bottom: 0 !important;
            }
        }
    </style>
</head>

<body class="bg-[#FEFCE8] flex flex-col min-h-screen overflow-x-hidden">
    <nav class="bg-[#FEFCE8] shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 flex items-center">
                    <a href="/" class="text-2xl font-bold text-blue-600 tracking-tight">
                        ArtisansHub
                    </a>
                </div>

                <div class="hidden md:flex md:items-center md:space-x-8">
                    <a href="/" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Explorer</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Premium</a>
                    <a href="{% url 'services' %}"
                        class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Our Services</a>
                </div>

                <div id="nav-unauthenticated" class="hidden md:flex items-center space-x-4">
                    <a href="{% url 'login' %}"
                        class="hidden md:inline-block text-gray-600 hover:text-blue-600 font-medium transition-colors">Log
                        In</a>
                    <a href="{% url 'signup' %}"
                        class="hidden md:inline-block bg-blue-600 text-white px-5 py-2 rounded-full text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm">
                        Sign Up
                    </a>
                </div>

                <div id="nav-authenticated" class="hidden md:flex items-center space-x-4">
                    <div class="relative">
                        <button type="button" id="user-menu-button"
                            class="flex items-center space-x-2 text-gray-600 hover:text-blue-600 font-medium transition-colors focus:outline-none">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span id="nav-username">User</span>
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div id="user-dropdown"
                            class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50">
                            <a id="dashboard-link" href="#"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                                Dashboard
                            </a>
                            <a id="bookmarks-link" href="{% url 'bookmarks' %}"
                                class="hidden block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                                Bookmarks
                            </a>
                            <a id="subscription-link" href="{% url 'subscription_portal' %}"
                                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                                Subscription
                            </a>
                            <button id="logout-button"
                                class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors">
                                Logout
                            </button>
                        </div>
                    </div>
                </div>

                <div class="md:hidden flex items-center">
                    <button type="button" class="text-gray-500 hover:text-gray-900 focus:outline-none p-2"
                        aria-label="Open menu"
                        _="on click remove .hidden from #mobile-overlay then wait 10ms then remove .translate-x-full from #mobile-drawer">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div id="mobile-overlay" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/40 transition-opacity duration-300 backdrop-blur-sm"
            _="on click add .translate-x-full to #mobile-drawer then wait 300ms then add .hidden to #mobile-overlay">
        </div>
        <div id="mobile-drawer"
            class="absolute right-0 top-0 bottom-0 w-[85%] max-w-sm bg-[#FEFCE8] shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
            <div class="flex justify-between items-center px-6 py-5 border-b border-gray-100">
                <h2 class="text-xl font-bold text-gray-900">Menu</h2>
                <button type="button"
                    class="text-gray-400 hover:text-gray-900 p-2 rounded-full hover:bg-gray-100 transition-colors"
                    _="on click add .translate-x-full to #mobile-drawer then wait 300ms then add .hidden to #mobile-overlay">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto no-scrollbar py-2">
                <nav class="flex flex-col">
                    <a href="/"
                        class="group flex justify-between items-center px-6 py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Explorer</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="#"
                        class="group flex justify-between items-center px-6 py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Premium</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="{% url 'services' %}"
                        class="group flex justify-between items-center px-6 py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Our
                            Services</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                </nav>

                <div id="mobile-nav-unauthenticated" class="mt-6 px-6">
                    <p class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-2">Account</p>
                    <a href="{% url 'login' %}"
                        class="group flex justify-between items-center py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Log In</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="{% url 'signup' %}"
                        class="group flex justify-between items-center py-4 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-blue-600">Sign Up</span>
                        <svg class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </a>
                </div>

                <div id="mobile-nav-authenticated" class="hidden mt-6 px-6">
                    <p class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-2">Account</p>
                    <div class="py-4 border-b border-gray-50">
                        <p class="text-sm text-gray-500">Logged in as</p>
                        <p id="mobile-nav-username" class="text-[17px] font-semibold text-gray-800">User</p>
                    </div>
                    <a id="mobile-dashboard-link" href="#"
                        class="group flex justify-between items-center py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Dashboard</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a id="mobile-bookmarks-link" href="{% url 'bookmarks' %}"
                        class="hidden group flex justify-between items-center py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Bookmarks</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5 5a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 19V5z" />
                        </svg>
                    </a>
                    <a id="mobile-subscription-link" href="{% url 'subscription_portal' %}"
                        class="group flex justify-between items-center py-4 border-b border-gray-50 hover:bg-gray-50 transition-colors">
                        <span
                            class="text-[17px] font-semibold text-gray-800 group-hover:text-blue-600">Subscription</span>
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                        </svg>
                    </a>
                    <button id="mobile-logout-button"
                        class="w-full group flex justify-between items-center py-4 hover:bg-gray-50 transition-colors">
                        <span class="text-[17px] font-semibold text-red-600">Logout</span>
                        <svg class="h-5 w-5 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="hero-banner relative w-full overflow-hidden">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <img src="{% static 'images/artisan-banner.png' %}" alt="ArtisansHub Banner"
                class="w-full h-auto object-contain rounded-2xl">
        </div>
    </div>

    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="bg-[#1f2937] text-white pt-4 pb-3 border-t border-gray-700 mt-auto">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex space-x-6 mb-4 md:mb-0">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <span class="sr-only">Facebook</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>

                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <span class="sr-only">Twitter</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" />
                        </svg>
                    </a>

                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <span class="sr-only">Instagram</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.451 4.66c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>

                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <span class="sr-only">LinkedIn</span>
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                                clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>

                <div class="text-center md:text-right">
                    <p class="text-sm text-gray-500 mb-2">&copy; 2025 ArtisansHub Global Inc.</p>
                    <div class="flex flex-wrap gap-x-4 gap-y-1 justify-center md:justify-end">
                        <a href="{% url 'terms' %}" class="text-xs text-gray-400 hover:text-white transition-colors">Terms of Service</a>
                        <a href="{% url 'privacy' %}" class="text-xs text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                        <a href="{% url 'refund' %}" class="text-xs text-gray-400 hover:text-white transition-colors">Refund Policy</a>
                        <a href="{% url 'content_policy' %}" class="text-xs text-gray-400 hover:text-white transition-colors">Content Policy</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <form id="logout-form" action="{% url 'logout' %}" method="POST" style="display: none;">
        {% csrf_token %}
    </form>

    <script>
        // Global authentication handler
        (function () {
            const token = localStorage.getItem('access_token');
            const username = localStorage.getItem('username');
            const role = localStorage.getItem('user_role');

            const navUnauth = document.getElementById('nav-unauthenticated');
            const navAuth = document.getElementById('nav-authenticated');
            const mobileNavUnauth = document.getElementById('mobile-nav-unauthenticated');
            const mobileNavAuth = document.getElementById('mobile-nav-authenticated');

            if (token && username) {
                // User is authenticated

                // Desktop: Hide unauth, Show auth
                // We must remove md:flex to ensure it hides on desktop
                navUnauth.classList.remove('md:flex');
                navUnauth.classList.add('hidden');

                navAuth.classList.add('md:flex');
                navAuth.classList.remove('hidden');

                document.getElementById('nav-username').textContent = username;

                // Mobile: Hide unauth, Show auth
                mobileNavUnauth.classList.add('hidden');
                mobileNavAuth.classList.remove('hidden');
                document.getElementById('mobile-nav-username').textContent = username;

                // Set dashboard link based on role
                const dashboardUrl = role === 'artist' ? "{% url 'artist_dashboard' %}" : "{% url 'explorer_dashboard' %}";
                document.getElementById('dashboard-link').href = dashboardUrl;
                document.getElementById('mobile-dashboard-link').href = dashboardUrl;

                // Show bookmarks link only for explorers
                if (role === 'explorer') {
                    document.getElementById('bookmarks-link').classList.remove('hidden');
                    document.getElementById('mobile-bookmarks-link').classList.remove('hidden');
                    // Hide subscription link for explorers
                    document.getElementById('subscription-link').classList.add('hidden');
                    document.getElementById('mobile-subscription-link').classList.add('hidden');
                } else {
                    // Show subscription link for artists (default)
                    document.getElementById('subscription-link').classList.remove('hidden');
                    document.getElementById('mobile-subscription-link').classList.remove('hidden');
                }

                // Dropdown toggle
                const userMenuButton = document.getElementById('user-menu-button');
                const userDropdown = document.getElementById('user-dropdown');

                // Remove existing listeners to prevent duplicates if any (though this is IIFE)
                // Cloning node is a cheap way to wipe listeners if needed, but here we just add.

                userMenuButton.onclick = function (e) {
                    e.stopPropagation();
                    userDropdown.classList.toggle('hidden');
                };

                // Close dropdown when clicking outside
                document.onclick = function () {
                    if (!userDropdown.classList.contains('hidden')) {
                        userDropdown.classList.add('hidden');
                    }
                };

                // Logout handlers
                function handleLogout() {
                    localStorage.removeItem('access_token');
                    localStorage.removeItem('refresh_token');
                    localStorage.removeItem('username');
                    localStorage.removeItem('user_role');
                    document.getElementById('logout-form').submit();
                }

                document.getElementById('logout-button').onclick = handleLogout;
                document.getElementById('mobile-logout-button').onclick = handleLogout;

            } else {
                // User is not authenticated

                // Desktop: Show unauth, Hide auth
                navUnauth.classList.add('md:flex');
                navUnauth.classList.remove('hidden');

                navAuth.classList.remove('md:flex');
                navAuth.classList.add('hidden');

                // Mobile: Show unauth, Hide auth
                mobileNavUnauth.classList.remove('hidden');
                mobileNavAuth.classList.add('hidden');
            }
        })();
    </script>

    {% block scripts %}{% endblock %}
</body>

</html>